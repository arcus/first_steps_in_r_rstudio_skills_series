<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>session_1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
<script src="site_libs/countdown-0.4.0/countdown.js"></script>


</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="session_1.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="welcome" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="welcome">Welcome</h2>
<p>These slides available at: <a href="https://arcus.github.io/first_steps_in_r_rstudio_skills_series/session_1.html" class="uri">https://arcus.github.io/first_steps_in_r_rstudio_skills_series/session_1.html</a></p>
<ul>
<li>Use keyboard arrow keys to
<ul>
<li>advance ( → ) and</li>
<li>go back ( ← )</li>
</ul></li>
<li>Type “s” to see speaker notes</li>
<li>Type “?” to see other keyboard shortcuts</li>
</ul>
<div class="notes">
<p>As we prepare to get started, I’d like to encourage you to open these slides on your own browser, so you will have them available to refer to later. There are also a number of links you may want to click on. I’ll copy paste that URL, where the slide deck is located, into chat, so everyone has it.</p>
<p>This first slide is just to help you navigate this slide deck if you look at these slides on your own! And yes, there are ample speaker notes, so if you missed something I said, chances are it’s going to be in the speaker notes of the slide.</p>
</div>
</section>
<section id="about-arcus-your-presenter" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="about-arcus-your-presenter">About Arcus / Your Presenter</h2>
<div class="columns v-center-container">
<div class="column small-text" style="width:60%;">
<p>Arcus is an initiative by the Research Institute aimed at promoting data discovery and reuse and increasing research reproducibility.</p>
<ul>
<li>Arcus app: <a href="https://arcus.chop.edu" class="uri">https://arcus.chop.edu</a></li>
<li>Arcus Sharepoint site: <a href="https://chop365.sharepoint.com/sites/Arcus" class="uri">https://chop365.sharepoint.com/sites/Arcus</a></li>
</ul>
<p>Among the many teams in Arcus, I represent Arcus Education!</p>
<p><img src="media/arcus_website.png" class="two-thirds bordered img-fluid"></p>
</div><div class="column small-text" style="width:40%;">
<p><img src="media/arcus_research_data_lifecycle.png" class="img-fluid"></p>
</div>
</div>
<div class="notes">
<p>Thanks again for joining us, and welcome to our session today! I’d like to begin by briefly introducing myself and introducing Arcus, for those of you who may not be familiar with us. My name is ______ [add pronouns here if you want], and I’ll be leading today’s session.</p>
<p>Arcus is an initiative by the Research Institute aimed at promoting data discovery and reuse and increasing research reproducibility throughout the research lifecycle, as you can see in the graphic on the right. [Pause, give folks a few secs to peruse the image].</p>
<p>Changing the paradigm of research is a big undertaking, and it requires a broad approach.</p>
<p>We aim to improve data reuse and research reproducibility at CHOP through technology, including Arcus labs and applied data science, through the use of data archiving and cataloging, and by way of education.</p>
<p>You can find out more by checking out the Arcus application website (please note, there are some pre-requisites to using the app, such as human subjects protection training and signing our terms of use). I’ve added just a very small screenshot of part of what the Arcus application website looks like on the slide on the left side. [Pause].</p>
<p>You can also, without any prerequisites, look at our Arcus Sharepoint site, which has a calendar of events and lots more information about Arcus.</p>
<p>And finally, a little more about me: I work in Arcus Education. Our role is to support CHOP scientists by helping researchers acquire data science skills. That’s why we have Skills Series like this one!</p>
</div>
</section>
<section id="arcus-education" class="level2">
<h2 class="anchored" data-anchor-id="arcus-education">Arcus Education</h2>
<div class="columns v-center-container">
<div class="column small-text" style="width:50%;">
<p><img src="media/arcus_education_page.png" class="bordered img-fluid"></p>
</div><div class="column small-text" style="width:50%;">
<p>Arcus education provides data science training to researchers …</p>
<p>(and often this is useful to non-researchers too!).</p>
<p><a href="https://arcus.chop.edu/i-want-to/arcus-education" class="uri">https://arcus.chop.edu/i-want-to/arcus-education</a></p>
<p>Email us! <a href="mailto:arcus-education@chop.edu" class="email">arcus-education@chop.edu</a></p>
</div>
</div>
<div class="notes">
<p>The Arcus Education team does lots of different kinds of education. We’ve been around since 2017, and we work one on one with researchers in office hours, we write how-to guides to help people understand how to use Arcus tools, we create asynchronous modules that people can use to acquire skills in their own time, and we do synchronous events like this one.</p>
<p>Sometimes we focus on Arcus customers, on researchers at CHOP who are doing research within the Arcus data sharing paradigm, and sometimes we broaden our reach to larger audiences, because we know that helping everyone acquire data science skills will help improve the conduct of science at CHOP and help build a data-driven workforce.</p>
<p>Please check out that education page and find out more about some of our services. You can see I’ve added a screenshot of that page to the slide here on the left side. You can also email us at arcus dash education at chop dot edu.</p>
</div>
</section>
<section id="first-steps-in-r-and-rstudio" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="first-steps-in-r-and-rstudio">First Steps in R and RStudio</h2>
<p>Arcus Education provides “Skills Series” for the entire CHOP community.</p>
<p>This Skills Series is a 5-session series aimed at helping you take your first steps in R and RStudio!</p>
<ul>
<li>Session 1: Review and Setup</li>
<li>Session 2: Projects and File Ingestion</li>
<li>Session 3: Exploring Data Visually, Using ggplot2</li>
<li>Session 4: Selecting Data Using dplyr</li>
<li>Session 5: Putting it All Together: Communicating Findings</li>
</ul>
<div class="notes">
<p>One of our methods in Education is the Skills Series, and that’s what you’re in today.</p>
<p>In this series, we’re going to take five sessions to help you make your first steps in R and RStudio. If you’ve never coded in R or used the RStudio software, and you want some support to get started, this is a great workshop series for you.</p>
<p>After you finish these five sessions, you’ll have a little experience with R and RStudio, and you’ll have done things like ingest data, made data visualizations, and subset specific data you want to study more closely.</p>
</div>
</section>
<section id="session-1-itinerary" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="session-1-itinerary">Session 1 Itinerary</h2>
<p>Review and Setup (see also: <a href="https://github.com/arcus/demystifying_r_rstudio_skills_series/blob/main/README.md">Demystifying R and RStudio</a>)</p>
<ul>
<li>Quick review of R, RStudio, and “literate statistical programming”</li>
<li>Posit.cloud: our environment for this course</li>
<li>Git and GitHub: Out of scope but very useful!</li>
<li>Your first Quarto Document</li>
<li>Getting R and RStudio at CHOP</li>
</ul>
<p>Goals:</p>
<ul>
<li>Use Source and Visual views in RStudio to experiment with how markdown gets rendered into attractive and descriptive text</li>
<li>Create a new code chunk in a Quarto document</li>
<li>Run a code chunk in a Quarto document</li>
</ul>
<div class="notes">
<p>So let’s get started with this first session. In this session we’re going to very rapidly review the basics about what R and RStudio are, along with some basics about literate statistical programming, Quarto, and Posit.cloud. Those were all the subjects of a previous Skills Series entitled “Demystifying R and RStudio”, so if today feels too fast, you can always go back and review that material.</p>
<p>We’ll also quickly describe what Git and GitHub provide, and give you some tips for getting R and RStudio at CHOP.</p>
<p>Our goals for today are three-fold.</p>
<p>By the end of the session I want you to use source and visual mode in RStudio to work with markdown, I want you to create a new code chunk in Quarto, and I want you to run a code chunk in Quarto. And don’t worry if you don’t know what any of that means! We’ll get there together.</p>
</div>
</section>
<section id="r-vs-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="r-vs-rstudio">R Vs RStudio</h2>
<div class="columns v-center-container">
<div class="column small-text" style="width:50%;">
<p><img src="media/r_logo.png" class="two-thirds img-fluid"></p>
</div><div class="column small-text" style="width:50%;">
<p><img src="media/rstudio_logo.png" class="half img-fluid"></p>
</div>
</div>
<div class="columns v-center-container">
<div class="column small-text" style="width:50%;">
<p><strong>R</strong> Programming language for data analysis</p>
</div><div class="column small-text" style="width:50%;">
<p><strong>RStudio</strong> Integrated development environment (IDE)</p>
</div>
</div>
<div class="notes">
<p>Let’s begin by distinguishing between R and RStudio.</p>
<p>The first logo you see here is for <strong>R</strong>. R is a statistical programming language that’s great for doing data analysis. There are several features that make R attractive for people who work with data.</p>
<ul>
<li>R was built specifically for statistical data analysis, so it’s got a friendly and focused user community and lots of great online resources for learning.</li>
<li>R is <strong>open source</strong>, which means that it is “free” in two ways – in the meaning of having <strong>no cost</strong> and also in terms of using it freely, that is, without intellectual property concerns or licensing restrictions.</li>
<li>R makes it possible to work with data and build scripts that do lots of things, from ingesting data to building data visualizations and lots of other things along the way.</li>
</ul>
<p>So that’s R, it’s a language with a lot of benefits.</p>
<p>Then, there’s <strong>RStudio</strong>. RStudio was the original name of a company as well as the name of a piece of software the company makes. A couple of years ago, the company changed its name from RStudio to Posit, but they kept the old name on at least some of their software.</p>
<p>You can think of RStudio (the software) as a fancy text editor for writing R code. The technical term for a fancy text editor for writing code is “Integrated Development Environment”, or I-D-E.</p>
<p>You don’t <strong>have</strong> to use RStudio to write R, but it makes it a lot easier. We like to give the example of typing a manuscript in Microsoft Word. If you didn’t have Microsoft Word, you could write down your thoughts in the Notes app on your phone. But Microsoft Word has lots of add-ons, like spell-check and word count that make it much more pleasant to write a paper there, rather than in the notes app on your phone!</p>
<p>One of the things you can do in RStudio really well is write code in a particular paradigm called literate statistical programming, and that’s what we’re going to talk about next.</p>
</div>
</section>
<section id="lsp-example-quarto" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="lsp-example-quarto">LSP Example (Quarto)</h2>
<div class="columns v-center-container">
<div class="column" style="width:50%;">
<p><img src="media/visual_view_lsp.png" class="bordered img-fluid"></p>
</div><div class="column" style="width:50%;">
<p>In Literate Statistical Programming, we not only use <strong>code</strong>, but also describe what we do in <strong>human language</strong>, with things like headers, bullet points, and other formatting to make it easier for humans to make sense of the code.</p>
</div>
</div>
<div class="notes">
<p>Literate statistical programming is computer code (that’s what makes it programming) that analyzes data (that’s what makes it statistical), and does so interlaced with detailed human language that describes what’s happening in the code (that’s what makes it literate). Here’s an example.</p>
<p>Here is a snippet of a script my team wrote, and you can see that it has some description of what the code is doing, to help humans. We put in a header, to separate a section that has to do more with bringing the data in and cleaning it. Then we write a paragraph describing what we’re going to do, followed by a chunk of code.</p>
<p>After that code executes, we’ll have some data. So we have some additional description of what we want to do, this time in the form of a bulleted list. I’m not showing you all of the code that makes that bulleted list happen, because it’s kind of long, but the code chunk with the grey background below that bulleted list is code we wrote that does all the things in that bulleted list.</p>
<p>This is what literate statistical programming looks like, and working in R and RStudio is a great way to get started working this way. This kind of document, by the way, is called a Quarto document. It includes R language but also includes text that has special formatting called “markdown”. You may have also heard the term “R Markdown”, which is practically the same thing. It’s an older term that preceded the word “Quarto”.</p>
<p>I want to get you creating Quarto documents as soon as possible, so let’s transition to talking about how to get you started working with R and RStudio right away!</p>
</div>
</section>
<section id="posit.cloud-for-learning-only" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="posit.cloud-for-learning-only">Posit.Cloud (for learning only!)</h2>
<p>You can use R and RStudio using online services like <a href="https://posit.cloud">https://posit.cloud</a>. Sign up for your free account, it’s what we’ll use for this series.</p>
<p>Posit.cloud is a great place for learning or practice with public datasets, BUT is not a safe or compliant place to put your regulated data.</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_a3533b5a" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="notes">
<p>When we teach R and RStudio, it can be next to impossible to deal with everyone’s different kinds of installation issues while they’re trying to get set up and deal with IS, get issues ironed out with their computers and their access permissions, etc.</p>
<p>That’s why we have our students use Posit.cloud to learn R and RStudio. Posit.cloud is an online, cloud based service provided by Posit, the company that makes the RStudio software. It’s really good and reliable and it has a very generous free tier! It means that as teachers we can concentrate on our learners really acquiring the skills around R and RStudio, without being bogged down by the fact that some people have Macs, some have PCs, some have admin rights, some don’t, and so on. Using Posit.cloud makes things a lot easier for teachers and learners. Even if you already have R and RStudio installed locally, I’m going to request that you use Posit.cloud for this Skills Series, because we do not have the time in a webinar with this many students to help you with your particular setup.</p>
<p>HOWEVER, we want to make one thing very clear! Posit.cloud is absolutely NOT an appropriate place for regulated health care data. It’s for <strong>practicing</strong> and <strong>learning</strong> using <strong>public datasets</strong>. If you’re going to use R for CHOP data, you should start the process of getting R and RStudio installed on your CHOP device so that you can transfer those skills to real-life work right away. If you want to learn more about that, there are slides about that in the Demystifying R and RStudio Skills Series that will help you.</p>
<p>For now, please, if you already have a Posit account, please log in to it. If you don’t have a Posit account, please go to https://posit.cloud and create a free account. When you have your Posit account created, please give us a thumbs up on the comment in the chat, so I can measure progress. I’ll give you two minutes to start and we’ll see where we stand. [Click the timer, and copy/paste the comment “I have a Posit.cloud account and I’m logged in there!” into chat].</p>
</div>
</section>
<section id="git-and-github-desktop-out-of-scope" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="git-and-github-desktop-out-of-scope">Git and GitHub Desktop: Out of scope</h2>
<p>… but very useful version control software.</p>
<p>Version control allows you to track, for text-based files:</p>
<ul>
<li>What changed (the file name, the line numbers, the actual text)</li>
<li>When (date and time)</li>
<li>By whom (username / ID)</li>
<li>Why (the person changing will add a message)</li>
</ul>
<p>(And that means no more <code>analysis_final.R</code>, <code>analysis_final_with_changes.R</code>, <code>analysis_final_final_final_please_why.R</code>)</p>
<div class="notes">
<p>Git and GitHub Desktop are complex and very useful software. We could do a skills series, or in fact several skills series, just on these! If anyone uses them for work and wants to let us know how often they use it or what they use it for, drop a message in chat. I’m curious to see how other people use version control at CHOP!</p>
<p>Version control software allows you to record changes to text-based files, including what changed in the file or files, when the change was made, who made the change, and why. Much like the relationship between R and RStudio, Git is the original software and GitHub, including GitHub Desktop, was built to make using Git easier, and it’s helpful but not necessary.</p>
<p>We won’t go into all the details about how to use these software packages, but we use them daily in my team including for managing the files for these workshops. When we start hands-on coding, you’ll be hearing me mention GitHub. You’ll get the exercise files from there to work with. If there’s one thing I hope you remember about Git and GitHub, it’s that they are very useful, and if you find them a real pain in the neck at first, hang in there, because they really truly are worth the effort to learn.</p>
<p>And the reason I’m bringing this up will become evident in the next couple of slides, because you’re going to install the exercise files from a Git repository.</p>
</div>
</section>
<section id="creating-a-project-in-posit" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="creating-a-project-in-posit">Creating a Project in Posit</h2>
<ul>
<li>Go to <a href="http://posit.cloud" class="uri">http://posit.cloud</a> (you already have a free account, right?)</li>
<li>Create a new project from a Git repository</li>
<li>URL to enter is <a href="https://github.com/arcus/first_steps_in_r_rstudio_exercises" class="uri">https://github.com/arcus/first_steps_in_r_rstudio_exercises</a> (Click OK)</li>
<li>Look around your RStudio environment!</li>
</ul>
<div class="columns v-center-container">
<div class="column small-text" style="width:40%;">
<p><img src="media/posit_new_from_git_repo.png" class="img-fluid"></p>
</div><div class="column small-text" style="width:40%;">
<p><img src="media/new_project_with_github_url.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_2ea75b21" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="notes">
<p>OK, we’re going to start a new project in Posit.cloud. This is the work that lays the foundation for everything else you’re going to do in this workshop, so get ready!</p>
<p>When you log in to Posit.cloud, you’re going to find the “New Project” button in the upper right. It’s big and dark blue and it stands out a lot. It’s not quite so visible when you use RStudio Desktop on your own computer, just as a heads-up – you have to find “New Project” in the menu system, it’s not a big button like it is in Posit.cloud.</p>
<p>You’ll see there are a few options for a new Project. You want to choose “New Project from Git Repository.”</p>
<p>What that means is that you’re going to copy some files from an existing location that my team uses to store the exercise files. This location is known as a repository. In the future, if we change anything to those files in the repository, you can update your copy, too, to stay up to date.</p>
<p>It will ask you for the URL of the repository. That’s where you want to type the URL shown in the slide: https://github.com/arcus/first_steps_r_rstudio_exercises. I’ll copy and paste that into the chat so you have it.</p>
<p>Later on, you can create other kinds of Projects in your Posit.cloud account using the other options that show up when you click New Project, so that you get a feel for how the other project types work. But I’ll let you do that in your own time.</p>
<p>For now, I want to give you a couple of minutes to do these steps. Please do this now! When you’re done creating that new project, give me a nice thumbs up in the chat. [Add “I’ve created my new project from the Git repository” comment to chat]</p>
<p>So I’ll share my Posit.cloud window with you now [Do this] and I’ll do the same thing, in case anyone is stuck. I’m going to log in to my Posit.cloud account, and click the New Project button [NOTE: before the session, make sure you have space to make a new project!]. I’ll choose the “from a Git Repo” option.</p>
<p>Now I’ll copy and paste in the URL of the repository my team maintains, like this.</p>
<p>And then it will think for a couple of minutes and then create a new project and include some files for me that were in the repo. And that’s that!</p>
<p>Let’s take a look around at the panes here.</p>
<p>In the lower right, you have a file browser, that shows all the files included in this project. It looks like we have a data directory, an exercises directory, a solutions directory, and a few other things that may seem unfamiliar, like a README and a couple of special files.</p>
<p>On the left, we see the R console, and that tells us about the version of R we’re running. In the upper right, we have a pane that shares a information about the environment of our project right now, but there’s nothing there yet, really, because we haven’t started working.</p>
<p>There’s a really helpful menu across the top, and I want to draw your attention to the Help item, which is the last menu option in the toolbar. If I click there, and go to Cheat Sheets, there are lots of useful one-page cheat sheets to help me remember how to do stuff in R and RStudio. Now, in my bottom right, you can see that my files disappeared, because the “Help” tab is now selected. I can just click on “Files” to bring that file viewer back.</p>
<p>OK, so that’s it for cloning our project. You now have your own copy of our exercises, and you’re ready to start working on them! So let’s go back to the slide deck.</p>
<p>[Go back to sharing the slide deck]</p>
</div>
</section>
<section id="create-your-first-literate-r-code" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="create-your-first-literate-r-code">Create Your First Literate R Code!</h2>
<p>This is what we’re going to do:</p>
<ul>
<li>Create a new Quarto Document</li>
<li>Add a bit of description describing what you’re planning to do</li>
<li>Add a “Code Chunk” doing the thing (in our case, installing <code>tidyverse</code> and <code>rmarkdown</code>)</li>
<li>Run that code chunk to make sure it works</li>
<li>Save that Quarto document as <code>setup.qmd</code> in your Exercises folder.</li>
</ul>
<div class="notes">
<p>The best way to get started is to just jump in, so that’s what we’re going to do, step by step together. This is what we’re going to do.</p>
<p>We’re going to create a new Quarto document, and we’re going to start right away using a literate style. So we’re going to describe what we’re doing, then do the thing, make sure it works, then save our file.</p>
<p>So, take just a minute to look at those bullet points, and then I’ll show you some screenshots to guide you on the next few slides. So don’t worry if these instructions are too vague. You’ll get more guidance in just a sec.</p>
</div>
</section>
<section id="step-1-create-a-new-quarto-document" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="step-1-create-a-new-quarto-document">Step 1: Create a New Quarto Document</h2>
<ul>
<li>Go to File, New File, Quarto Document.</li>
<li>Give it the title “Setup” and click “Create”.</li>
<li>Try clicking on “Visual” and “Source” and scrolling up and down!</li>
<li>You might get a “Visual mode” pop up box – give it a read.</li>
</ul>
<div class="columns v-center-container">
<div class="column small-text" style="width:40%;">
<p><img src="media/new_quarto_document.png" class="img-fluid"></p>
</div><div class="column small-text" style="width:40%;">
<p><img src="media/create_quarto_document.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_a7a7477a" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="notes">
<p>OK, so with each step, I’ll give you about a minute to do this, and then I’ll show you what it looks like and demo it live.</p>
<p>First, please use the File, New File menu option to create a new Quarto document. You’ll be asked to provide a title. Make that title “Setup”. You can put your name in as Author if you want, but don’t change anything else. Then click the “Create” button at the bottom right. When your new file creates, please don’t click anything else, even if you see a yellow banner that is prompting you to install a program. I want you to wait, please.</p>
<p>I’ll give you a minute, and then I’ll share my screen and do the same thing as you.</p>
<p>[Click countdown timer].</p>
<p>OK, so let me switch my screen over to my own Posit.cloud account, where I’ve got the project open. I’m going to click on File, then New File, and then Quarto Document. I’ll add the word “Setup” to the Title, and click “Create”. Simple as that.</p>
<p>Now, I want to point out that there’s a banner there that is offering you a shortcut. I do NOT want you to take this shortcut. If you did already, that’s okay, but I want to show you the manual way to install packages, so please don’t click in that yellow banner. It’s a useful message, however, because it’s telling you, hey, for me to be fully effective, you need to install a package, specifically the <code>rmarkdown</code> package. So we’ll use this data in just a sec.&nbsp;</p>
<p>Now, I’m going to click on these two buttons, Visual and Source, to see two different ways this sample file looks. I’ll get an informational pop up telling me “oh hey, you’re about to enter into Visual mode, here’s some info about that.” If you want to read that later, you can, but just uncheck that box so you can make it pop up again!</p>
<p>You can see that the RStudio software has given me some sample code to help guide me. This sample code is something you might hear people call “boilerplate” code. We don’t need this code, but it helps give us a guide to follow. I’m going to scroll up and down, and look at it in both Visual mode and Source mode. This will help you understand how markdown works. You can see the raw markdown by clicking on the Source button, and see things like triangle brackets and double asterisks and hash marks, and then click on Visual to see how that markdown gets rendered into html to have the formatting we want.</p>
<p>Does it matter what you use? Source or Visual? Well, for this course we’re going to have you use Source, just so we’re all doing the same thing. But for your future work, it doesn’t really matter. Use what you prefer! Or go back and forth between Source and Visual, to try things out and see what they look like. So for now, click on Source so we’re all seeing the same thing.</p>
<p>OK, let’s go back to the slides for our next step.</p>
<p>[Go back to slides.]</p>
</div>
</section>
<section id="step-2-add-a-bit-of-description" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="step-2-add-a-bit-of-description">Step 2: Add a bit of description</h2>
<ul>
<li>Remove the existing markdown and code</li>
<li>Start a new header (“Installing Packages”) with two hash marks (#)</li>
<li>Enter a blank line</li>
<li>Then type a description of installing packages</li>
</ul>
<div class="columns v-center-container">
<div class="column small-text" style="width:70%;">
<p><img src="media/writing_first_markdown.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_70ef16f2" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="notes">
<p>Again, I’ll give you about a minute to do this. Delete all the stuff from the line with the header “quarto” (that’s line 7 or 8 if you’re looking in the Source view). Then add a new header and description. I’ll start the timer to give you a chance to do it, then I’ll demo this for you.</p>
<p>[Click countdown timer].</p>
<p>OK, so let me switch my screen over to my own Posit.cloud account, where I’ve got the project open.</p>
<p>I’m going to make sure I’m in “Source” view, and I’m going to put my cursor at the start of line 7. I’ll highlight everything here from line 7 and below, and just hit backspace or delete to remove it.</p>
<p>Now I’ll put in two hashmarks, which, if you’re an HTML person, will make an H2 header, and put a space after the hashmarks. And I’ll put the text of the header, which can be whatever you want, but I want this to say “Installing Packages.”</p>
<p>I’ll hit enter two times after this, so that there’s a blank line after my header, and then I’ll just start typing. Maybe I’ll say something like “We need to install some packages.” Now, I’ll explain in session 2 about installing packages and when you need to do that, so don’t worry if you’re not sure what this is actually doing.</p>
<p>If I want to see what this kind of formatting looks like when it is rendered into HTML, I can click on the Visual button at the top to see what it looks like. Yep, a header, and some explanatory text below that. Perfect! I’ll go back to Source view for now, and then we can go back to the slides.</p>
<p>[Go back to slides.]</p>
</div>
</section>
<section id="step-3-add-a-code-chunk" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="step-3-add-a-code-chunk">Step 3: Add a Code Chunk</h2>
<ul>
<li>Position your cursor after your explanatory text</li>
<li>Hit enter to make sure there’s a blank line</li>
<li>Then use the green “+C” button to add a code chunk</li>
<li>Inside that code chunk, type this, exactly: <code>install.packages(c("rmarkdown", "tidyverse"))</code></li>
</ul>
<div class="columns v-center-container">
<div class="column small-text" style="width:40%;">
<p><img src="media/about_to_click_new_chunk.png" class="img-fluid"></p>
</div><div class="column small-text" style="width:40%;">
<p><img src="media/new_code_chunk.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_14d77431" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<div class="notes">
<p>As usual, I’ll give you a minute to do this. You’re going to add a code chunk. Now, you can certainly do this by typing in all the symbols for a code chunk manually, BUT it’s much easier if you find the “Add a Code Chunk” button, which is a green button with the letter C, and click that.</p>
<p>Once you have an empty code chunk, I want you to copy the code there exactly as written, and I’ll explain it in a bit. Go ahead and try it! After a minute I’ll do it, too.</p>
<p>[Click countdown timer].</p>
<p>OK, so let me switch my screen over. I’m going to hit enter and move my cursor so that my code chunk is placed after my descriptive text, and after a bit of white space, too. I’ll click on the add a code chunk button, and an empty code chunk appears. Let’s look at the anatomy of this code chunk.</p>
<p>First, it starts with three backticks (this symbol is NOT the same as a single quote!). Then, there’s the designation of what programming language is going to appear in this code chunk. We’re using the R language, so we’re going to leave this be, with the letter “r” in curly braces.</p>
<p>There’s a space to add code, and then the code chunk ends with three more back ticks.</p>
<p>And you can see that visually, it’s grey, to give a little bit of help so we can distinguish between where the code is and where the description is.</p>
<p>Now, I’m going to type in this code. First, I’ll start by typing install dot packages. As I type, predictive text might appear, and I can just hit enter to accept the suggestion.</p>
<p>So I have install.packages and a set of parentheses. Now, inside those parentheses, I want to put in a list. In r, we commonly use what’s called a concatenation to designate a list. And that’s just the letter c, followed by a set of parentheses. So I’ll put c, open parenthesis, and look, the closed parenthesis appears for free. [ Note: you should have <code>install.packages(c())</code>].</p>
<p>And inside that concatenation, I want to put a comma delimited list of package names, with quotes. There are two packages I know I need. From the banner above, I know I need “rmarkdown”. I also know that later in our work together we’re going to use a lot of functionality from the tidyverse set of packages, so I’ll add “tidyverse”. So all told, this is what I have:</p>
<ul>
<li>install dot packages,</li>
<li>open parenthesis,</li>
<li>the letter c for concatenation,</li>
<li>open parenthesis,</li>
<li>the namd rmarkdown in quotes,</li>
<li>a comma,</li>
<li>the word tidyverse in quotes,</li>
<li>the closing parenthesis for my concatenation</li>
<li>the closing parenthesis for my install.packages</li>
</ul>
<p>Take a look and make sure your code chunk looks like mine.</p>
<p>OK, let’s go back to the slides! [go back to slides]</p>
</div>
</section>
<section id="step-4-run-that-code-chunk" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="step-4-run-that-code-chunk">Step 4: Run that Code Chunk</h2>
<ul>
<li>Use the green triangle (“Play” button) on the chunk to run the chunk</li>
<li>Look in the “Console” for output. It will be verbose, and take a while.</li>
<li>You’ll know it’s finished when the prompt <code>&gt;</code> appears in the Console and the Stop sign disappears!</li>
</ul>
<div class="columns v-center-container">
<div class="column small-text" style="width:40%;">
<p><img src="media/run_code_chunk.png" class="img-fluid"></p>
</div><div class="column small-text" style="width:40%;">
<p><img src="media/install_in_progress.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_2ef07a69" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">00</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">30</span></code>
</div>
</div>
</div>
<div class="notes">
<p>Again, you’ll do this first, then I’ll demo. You’re going to run this code by clicking on the “play” button in the code chunk, and these libraries will install. It’ll take a while! And if you mistyped something, you might get an error message. If that happens, don’t panic. Read the error message and see if you can figure out what it’s trying to communicate. I’ll give you a minute to do this, then I’ll demonstrate this step.</p>
<p>[Click countdown timer].</p>
<p>OK, so let me switch my screen over. Let me move my mouse over to the top of my code chunk at the top right corner, and find that green “play” button. I’ll click there, and in the console, I can watch a lot happen.</p>
<p>[Do the thing]</p>
<p>OK, so while this is going on I’ll explain that if there are any libraries that are dependencies, things that are required to be installed before the libraries we want to install can be successfully installed, those will come along for free. So you’re going to see not just rmarkdown and tidyverse get installed, but lots of other underlying packages, too. When the install is still running, you’ll see a stop sign in the Console, which you can click if you need the process to stop.</p>
<p>Once things finish, there will be a prompt in the Console, ready for the next command.</p>
<p>Now, this is a moment where sometimes people have error messages, so let’s pause here in case there are issues, before we go on.</p>
<p>…</p>
<p>OK, so let’s go back to the slides.</p>
<p>[Go back to slides]</p>
</div>
</section>
<section id="step-5-save-that-quarto-document" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="step-5-save-that-quarto-document">Step 5: Save that Quarto Document</h2>
<ul>
<li>Click on File, Save</li>
<li>Name your file “setup” (you don’t have to add “.qmd”, but you can!)</li>
<li>Save it inside the “exercises” folder</li>
</ul>
<p><img src="media/save_file.png" class="img-fluid"></p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_e65e3622" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">−</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">00</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">30</span></code>
</div>
</div>
</div>
<div class="notes">
<p>OK, last step! I’m going to ask you to save this file. You shouldn’t ever have to run this code again for this project, but it might be handy to hang on to it anyway. Please use the File menu to save this file. Give it the name setup and save it in “exercises”.</p>
<p>You do it, then I’ll do it.</p>
<p>[Click countdown timer].</p>
<p>OK, that’s time. I’ll share my Posit.cloud window now, and I want you to notice that my file name here is red and has an asterisk, which is telling me there are unsaved changes. So let’s go into File, then Save. I’m going to type “setup” in the file name, choose “exercises” for the file location, and then “Save”.</p>
<p>When I do that, my file name is no longer red, it’s black, and that is a good visual indicator that I’m caught up, that there are no unsaved changes.</p>
<p>Let’s go back to the slides.</p>
</div>
</section>
<section id="summary-of-today" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="summary-of-today">Summary of Today</h2>
<p>Today, you:</p>
<ul>
<li>Learned about R and RStudio</li>
<li>Learned about Literate Statistical Programming</li>
<li>Signed up for (or logged into) Posit.cloud</li>
<li>Cloned (copied) our exercise files from GitHub into a new Project</li>
<li>Installed the tidyverse package into that Project</li>
</ul>
<p>That’s a lot! Give yourselves a round of applause.</p>
<div class="notes">
<p>OK, so that’s session 1. Today, we talked about R and RStudio and how to acquire R and RStudio, along with Git and GitHub, using CHOP’s software installation request form. We also presented the idea of literate statistical programming, which is a way to write code that is interlaced with rich, descriptive human language that describes and contextualizes the code. And you did a lot of work, too!</p>
<p>You either signed up for Posit.cloud for the first time, or you logged in. You created a new project, basing it on a GitHub repository. The technical word for copying a GitHub project is cloning. And you did a package installation as well, using the R console in your Project. Good work!</p>
</div>
</section>
<section id="qa-was-this-effective" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="qa-was-this-effective">Q&amp;A / Was This Effective?</h2>
<p>We like to measure our effectiveness (and analyze it in R!)</p>
<p>Goals:</p>
<ul>
<li>Use Source and Visual views in RStudio to experiment with how markdown gets rendered into attractive and descriptive text</li>
<li>Create a new code chunk in a Quarto document</li>
<li>Run a code chunk in a Quarto document</li>
</ul>
<div class="notes">
<p>The Arcus education team is a group that likes to measure our effectiveness and make changes based on what we learn. So before we do questions and answers and our final slides, we like to make sure to give our learners a poll to see if we made a good use of your time. We’re going to ask if we were effective in reaching our goals today, and those goals are on the screen in order to help you answer that question. Once you answer that poll, feel free to type a question into chat or come off mute and ask to clarify anything I can explain a bit better.</p>
</div>
</section>
<section id="next-session" class="level2">
<h2 class="anchored" data-anchor-id="next-session">Next Session</h2>
<p>Projects and File Ingestion</p>
<ul>
<li>File systems can be challenging to navigate</li>
<li>Projects in RStudio</li>
<li>Installing and loading packages</li>
<li>Tabular data ingestion from .csv files</li>
<li>Functions in R</li>
</ul>
<div class="notes">
<p>In our next session, we’re going to talk about projects, ingesting data, and functions in R. You’ll get to work with real clinical data from the University of California, Irvine Machine Learning Data Repository, so next session is when things start to get fun. Thanks so much for your time, and I look forward to seeing you next time!</p>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>